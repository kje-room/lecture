<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- playsinline : ios에서 전체 화면이 아니라, html 안에서 재생되도록 하는 속성 -->
    <video id = "v" autoplay playsinline></video>
    <br>
    <button type = "button" id = "show">open cam</button>
<script>

    document.querySelector('#show').addEventListener('click',  async () => {
        const option = {
            // 오디오 음소거 유무
            audio: true,
            // 비디오 화면 켜짐 여부
            video: true
        }
        // 내 컴퓨터의 장비(스피커, 마이크 등)를 다 확인 가능한 코드
        // await를 써서 navigator~ 코드가 끝나야 다음 페이지로
        const stream = await navigator.mediaDevices.getUserMedia(option);
        
        // 장비 이름 보여주기
        const track = stream.getVideoTracks();
        console.log(`비디오 장치명 : ${track[0].label}`)

        // html의 video 가져오기
        const video = document.querySelector('#v');
        // video의 srcObject에 넣기
        video.srcObject = stream;
    });
</script>
</body>
</html>