<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=<device-width>, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- playsinline : ios에서 전체 화면이 아니라, html 안에서 재생되도록 하는 속성 -->
    <video id = "v" autoplay playsinline></video>
    <br>
    <button type = "button" id = "show">open cam</button>
<script>

    document.querySelector('#show').addEventListener('click', () => {
        const option = {
            // 오디오 음소거 유무
            audio: true,
            // 비디오 화면 켜짐 여부
            video: true
        }
        // 화면 공유용 설정. 이렇게 하면 내 화면을 가져올 수 있음.
        // 성공하면 fnSucc 함수, 실패하면 fnFail 실행
        navigator.mediaDevices.getDisplayMedia(option).then(fnSucc, fnFail);

        function fnFail(error) {
            console.error('화면 공유 실패: ', error);
        } 
        function fuSucc(stream) {
            // 화면 공유가 실행됨
            document.querySelector('#v').srcObject = stream;
        }
    });
</script>
</body>
</html>